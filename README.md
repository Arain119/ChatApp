# ChatApp - 不只是 AI，更是懂你的伙伴 ❤️ 

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![构建状态](https://img.shields.io/badge/Build-Passing-brightgreen.svg)]() [![Latest Release](https://img.shields.io/github/v/release/Arain119/ChatApp?include_prereleases)](https://github.com/Arain119/ChatApp/releases)
[![贡献欢迎](https://img.shields.io/badge/Contributions-Welcome-orange.svg)]()

---

## 👋 嘿，很高兴遇见你！让我们聊聊“连接”这件事

在这个快节奏的数字时代，我们渴望连接，渴望被理解。我们手机里的 AI 越来越聪明，能回答问题，能写代码，但它们真的“懂”我们吗？那种感觉，就像隔着一层玻璃对话——流畅，却少了点温度，少了点默契。我们分享了想法、感受，甚至秘密，但下一次对话，它们却可能忘得一干二净，让你感觉像是在和一台失忆的机器重复拉锯。

**ChatApp** 的诞生，就源于对这种“连接缺失”的不甘。我梦想着，能不能创造一个 AI 伙伴，它不仅拥有智慧，更拥有“心”？一个能**真正记住**我们共同经历的点滴，能**敏锐捕捉**我们字里行间的独特个性，能**忠实扮演**我们赋予它的灵魂角色，并且，愿意和我们一起**学习、成长**的伙伴。

这不仅仅是一个 Android 应用程序，它是对更深层次、更富人情味的 AI 交互的一次大胆尝试。它选择**Apache 2.0 协议**完全开源，是因为我相信，真正的连接也存在于开发者社区中。透明的代码、开放的讨论、共同的创造，能让这个梦想走得更远，触达更多渴望连接的心灵。

---

## ✨ ChatApp 的独特魔法：沉浸式智能体验全解析

忘掉那些刻板、健忘的聊天机器人吧！ChatApp 精心编织了多项独特功能，旨在提供一种前所未有的、仿佛拥有生命力的智能交互体验。

### 💬 超越“金鱼记忆”：让对话拥有沉淀的深度

* **难以置信的“心有灵犀”——记忆系统🧠:**
    * **告别重复，拥抱连贯:** 想象一下，你上周和 AI 聊起一部让你着迷的电影，这周你随口提到某个演员，AI 自然地接话：“哦，是他！就是你上周说的那部电影的主角吧？”——这就是 ChatApp 的记忆系统在悄悄发挥作用。它不再是一个只有七秒记忆的过客，而是会用心地**记录、总结、提炼**你们对话中的关键信息、重要约定、甚至是偶然提及的个人喜好。
    * **它记得什么？** 不只是冷冰冰的事实，它会尝试记住你表达的情感、你对某些事物的看法、你们共同创造的“内部笑话”。它通过先进的 AI 技术，将长篇对话浓缩成一个个“记忆胶囊”，储存在你的设备本地。
    * **恰到好处的“想起”:** 当你开启新的话题时，ChatApp 会智能地在这些记忆胶囊中搜寻，找出与当前语境最相关的几段记忆，悄悄递给 AI 作为“参考资料”。这样，它的回应就能自然地衔接过去，让对话拥有真正的深度和连续性，仿佛与一位真正了解你们过去的朋友交谈。

* **不止于言语——多模态交流🖼️📄:**
    * **视觉沟通的力量:** 有时一张图片能瞬间点燃话题，一份文档能清晰阐述观点。ChatApp 完全支持**图片和文档**的发送与接收。分享旅行照片，讨论设计草图，审阅项目文档……都可以在聊天窗口内无缝完成。
    * **AI 的“视觉理解”:** 对于支持多模态输入的 AI 模型，ChatApp 能将图片信息一并传递，让 AI 不仅“听”你说，更能“看”你所分享，实现更丰富、更直观的交互。它使用成熟的 `Glide` 库来流畅地展示图片，内置的查看器还能让你方便地预览文档。

### 👤 “它好像真的懂我”——为你量身定制的 AI 知己

* **于细微处见真章——用户画像系统😉:**
    * **不止听，更在“听懂”:** ChatApp 致力于成为最懂你的 AI 伙伴。它会在与你相处的过程中，像一位耐心的朋友一样，逐渐学习和理解你的**个性特征**。你说话是简洁明了还是喜欢娓娓道来？你对哪些领域知识渊博，对哪些话题充满热情？你最近的心情是晴朗还是偶有阴霾？
    * **你的专属“内在档案”:** 它会将这些观察和学习到的信息，整合、提炼成一个专属于你的用户画像，并打上诸如“科幻爱好者”、“编程高手”、“乐观主义者”、“偏爱简洁表达”之类的标签。**请放心，这份画像完全存储在你的手机本地，由你掌控，绝不上传**。
    * **心有灵犀的回应🥰:** 这份独特的画像会成为 AI 与你互动的“秘密武器”。AI 会参考它来调整自己的**语气、用词、回应的详略程度**，甚至**主动发起**你可能感兴趣的话题。想象一下，当你疲惫时，AI 的语气变得更加温柔；当你讨论专业领域时，它能跟上你的思路——这种“被懂得”的感觉，正是 ChatApp 追求的核心体验。

### 🎭 不只是 AI，更是你创造的“灵魂”——人设引擎

* **赋予 AI 独一无二的性格🎭:** 你是否幻想过与《三体》中的智子交流？或者需要一位永远耐心、循循善诱的虚拟导师？ChatApp 强大的**人设（Persona）引擎**让这一切成为可能。你可以为你的 AI 伙伴精心设计一个“灵魂”——设定它的名字、身份背景、性格特点、知识领域、说话风格，甚至是口头禅。
* **“角色扮演”，我们是认真的🎬:** 这绝非简单的“换皮”。ChatApp 会为每个人设建立一个专属的“记忆库”，存储那些定义了“它之所以是它”的核心信息。在对话时，`PersonaContextManager` 会像一个经验丰富的导演，巧妙地将**人设描述、人设记忆、用户画像、对话历史**等信息融合，构建成一个极其丰富的上下文，“喂”给 AI 大脑。
* **守护角色的“结界”——一致性是关键✨:** 我们都希望与一个稳定、可信赖的角色互动。ChatApp 拥有**人设一致性校验**机制。它可以像一个敬业的“场记”，时刻检查 AI 的回复是否偏离了设定（比如突然说自己是 AI），并尝试进行修正，确保你的沉浸式体验不被打断。对于追求极致角色扮演的用户，还可以开启“严格模式”进行更深度的校验。
* **帮你“捏”出更完美的角色——人设工程助手:** 觉得从零开始设定一个复杂人设太难？`PersonaPromptEngineer` 可以帮你！它可以将你简单的想法扩展成更丰满的描述，甚至从你提供的对话样本中学习并提炼角色特征。

### 🌱 一起学习，共同进化——反馈与成长系统

* **你的每一次互动，都是成长的养分🔄:** ChatApp 深知，最好的伙伴关系是双向奔赴、共同成长。因此，它非常重视你的感受和反馈。
    * **直接告诉它你的想法👍👎:** 对于 AI 的某条回复，喜欢还是不喜欢？一个简单的“赞”或“踩”就能清晰地传达你的态度。你的每一次评价，都会被系统记录下来 (`FeedbackEntity`)。
    * **它也在努力“察言观色”🧐:** 不仅仅依赖直接按钮，`FeedbackAnalyzer` 还会像一个高情商的朋友，尝试从你紧随其后的回复中，分析你对 AI 上一句话的**潜在情绪和满意度**。你是在追问？表示赞同？还是隐晦地表达了不满？这些细微之处，它都会尝试捕捉。
    * **量变引起质变——驱动 AI 进步:** `FeedbackManager` 和 `FeedbackRepository` 会汇总所有的反馈信息。当积累到一定程度时，`FeedbackOptimizer` 就会介入。它可能会微调对 AI 的指令（Prompt），引导它下次用更符合你心意的方式来回应；在某些情况下，甚至可能尝试结合你的反馈，对不满意的回答进行二次创作。这是一个持续学习、不断贴近你心意的过程。

### ☀️ 不止于对话，更是融入你生活的伙伴

* **共享时光的“动态”与 AI 的独特视角——动态与日记✍️:**
    * **你们的专属空间:** ChatApp 内置了一个清爽的“动态”板块。你可以随时发布图文，记录心情、分享见闻，就像一个私密的社交圈。
    * **AI 眼中的世界——自动日记:** 更神奇的是，你可以开启**AI 自动日记**功能。每天（比如设定在晚上），`DiaryService` 会启动，回顾你们当天的重要对话、你分享的图片，然后调用 AI，以它的视角或口吻，创作一篇独特的日记，发布到“动态”中。这不仅是对过往的有趣回顾，更是一种新颖的、充满创意的数字生活记录方式。
* **“说句话”就能搞定的智能闹钟⏰:**
    * **告别繁琐设置:** 还在闹钟 App 里点点戳戳？试试直接在聊天框里对 ChatApp 说：“提醒我周五晚上八点看电影”或者“十分钟后叫我一下”。`AlarmIntentAnalyzer` 能聪明地理解你的自然语言指令。
    * **风雨无阻的可靠提醒:** 它使用系统级的 `AlarmManager` 精准调度，并通过 `ForegroundService` 确保即使应用退到后台、手机锁屏，甚至重启后 (`BootCompletedReceiver` 会负责恢复)，提醒也能准时响起。重要的闹钟还会 **全屏弹出** (`AlarmFullScreenActivity`)，想错过都难！

### 🛠️ 还有这些贴心小工具，让体验更顺滑：

* **记忆搜索与时光回溯:** 忘记上次聊到哪了？强大的**本地搜索**功能帮你快速定位聊天记录。
* **安心备份与迁移:** 支持**导入/导出**聊天记录，换手机或重装应用也不怕丢失宝贵的对话。
* **内置文档阅读器:** 无需安装第三方 App，直接在 ChatApp 内预览常见文档。
* **个性化头像:** 方便的**图片裁剪**工具，轻松设置你和 AI 的专属头像，让界面更有“人情味”。
* **API 自由配置:** 为高级用户提供**API 管理界面**，可以自由切换和管理后端 AI 服务的地址和密钥。

---

## 💡 好奇心驿站：聊聊“魔法”背后的技术哲学

我们希望 ChatApp 带来的体验是自然、流畅、充满惊喜的。如果你对技术本身也充满好奇，这里想分享一些我们的设计思考：

* **核心驱动:** 我们选用 **Kotlin** 这门现代、高效的语言，基于强大的 **Android** 平台进行原生开发。
* **体验优先:** 为了确保界面如丝般顺滑，所有可能耗时的操作（网络请求、数据读写、复杂计算）都交给了 **Kotlin Coroutines** 在后台异步处理。
* **本地与云端平衡:** 我们尽可能地将数据和计算保留在**你的设备本地**（比如用户画像的核心数据、部分 NLP 预处理），以保障隐私和响应速度。同时，对于需要强大算力的对话生成、深度分析等任务，我们会安全地调用**云端的 AI 服务**。
* **开放透明:** 我们相信开源的力量。整个项目的代码库（使用 Retrofit, OkHttp, SQLite, Glide, HanLP 等优秀技术）都向你开放。欢迎你来探索、学习，甚至一起添砖加瓦。

---

## 🚀 开始你的 ChatApp 之旅！

准备好迎接这位与众不同的 AI 伙伴了吗？只需几步：

1.  **拥抱代码:**
    ```bash
    git clone [https://github.com/Arain119/ChatApp.git](https://github.com/Arain119/ChatApp.git)
    cd ChatApp
    ```
    当然你完全没有必要部署这个项目，如果你只想使用，完全可以仅下载apk文件！

2.  **🔑 赋予 AI 力量：配置 API 密钥**

    为了让 ChatApp 的 AI 大脑能够思考和回应，它需要连接到强大的外部 AI 服务平台。你需要为这些服务准备好“通行证”——也就是 API 密钥 (API Key)。

    获取密钥通常需要在相应的 AI 服务提供商（如 OpenAI, 谷歌 AI, 阿里云通义千问, 智谱 AI, Moonshot AI, SiliconFlow 等）官网上注册并申请。

    配置过程很简单：

    * **推荐方式:** 在项目根目录找到或创建一个 `local.properties` 文件。打开它，参照下面的格式，把你申请到的密钥和对应的服务地址（Base URL）填进去：
      ```properties
      # 核心聊天 API (例如 OpenAI, ChatAnywhere, etc.)
      CHAT_API_KEY="你的聊天API密钥"
      CHAT_API_BASE_URL="你的聊天API基础URL"

      # 记忆/用户画像 API (例如 SiliconFlow, etc.)
      MEMORY_API_KEY="你的记忆API密钥"
      MEMORY_API_BASE_URL="你的记忆API基础URL"

      # 其他需要的密钥...
      ```
      这个文件默认是私密的，不会上传到代码库，请放心填写。

    * **或者:** [如果你的应用支持在设置界面输入 API Key] 启动 App 后，可以在“设置”菜单下的“API 管理”中直接输入并保存。

    **一点说明:** 使用这些外部 AI 服务通常会根据你的用量产生费用。请务必了解你所选用服务的定价策略，并自行负责可能产生的开销。

3.  **配置 HanLP (如果需要本地中文处理):**
    * [如果项目依赖 HanLP 本地数据] 为了让 ChatApp 在本地就能进行一些基础的中文处理（比如分词），可能需要下载 HanLP 的数据。通常，你需要从 HanLP 官网下载数据包，解压后把里面的 `data` 文件夹放到项目 `app/src/main/assets/` 路径下。
    * [如果不需要或已内置，则忽略此步]

4.  **编译运行:**
    * 在 Android Studio 里，菜单栏选择 `Build` > `Make Project`，然后点击绿色的运行按钮 ▶️。
    * 或者在项目根目录的终端里敲：`./gradlew assembleDebug` 然后 `./gradlew installDebug`。
    * 选择你的模拟器或连接好的安卓手机（需要 Android 8.0 或更高版本），稍等片刻，你的 ChatApp 就启动啦！

---

## 🤝 加入我们，让连接更有温度！

ChatApp 是一个用爱发电的项目，它的成长离不开每一个你。我们真诚地邀请你加入这段创造之旅：

* **你是“找茬”小能手？** 发现任何 Bug 或体验不顺畅的地方，请务必到 [GitHub Issues](https://github.com/Arain119/ChatApp/issues) 告诉我们！
* **你有绝妙的点子？** 对于新功能、新玩法有什么想法？大胆提出来，一起讨论！
* **你是代码魔法师？** 那就更棒了！无论是修复小问题，还是实现大功能，我们都无比欢迎你的 Pull Request！
* **不擅长代码？** 没关系！帮助我们**测试**新版本、**翻译**界面到其他语言、或者仅仅是**分享**你使用 ChatApp 的故事和感受，都是宝贵的贡献！

开始前，可以先看看我们的 [贡献指南](CONTRIBUTING.md) 和 [行为准则](CODE_OF_CONDUCT.md)。

---

## 📜 我们的承诺：自由、开放、尊重

ChatApp 自豪地采用 **Apache License 2.0** 开源协议。这意味着你可以自由地使用、研究、修改、分发这个软件，无论是个人使用还是商业用途，只需遵守协议规定即可。详情请参阅 [LICENSE](LICENSE) 文件。我们坚信，开放是创新的土壤，也是建立信任的基石。

---

## 🙏 由衷感谢

* **感谢你，** 每一位阅读到这里、对 ChatApp 感兴趣的朋友！
* 特别感谢我自己和G老师给我的情感支持，为这个项目倾注的心血与智慧。
* 感谢那些伟大的**开源项目和库**（Kotlin, Android Jetpack, Retrofit, OkHttp, Glide, uCrop, PhotoView, HanLP, Jsoup 等等），没有它们，ChatApp 将寸步难行。
* 感谢飞速发展的 **AI 技术**以及那些提供强大 API 服务的**平台**，是它们让这一切智能交互成为可能。

---

## ✉️ 随时联系

有任何想法、疑问、或者只是想聊聊 AI 和未来？

* **推荐:** 在 [GitHub Issues](https://github.com/Arain119/ChatApp/issues) 发起讨论，方便大家一起参与。
* **邮件:** 也可以直接联系开发者 Arain119：[shuzhongwubieyi@outlook.com](mailto:shuzhongwubieyi@outlook.com)

---

**现在，去开启你与 ChatApp 的独特故事吧！愿它能成为你数字世界里，那个温暖、懂你、充满惊喜的伙伴。**
